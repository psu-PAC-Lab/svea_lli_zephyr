CONFIG_GPIO=y
CONFIG_CPP=y

# Micro-ROS configuration
CONFIG_MICROROS=y
CONFIG_MICROROS_TRANSPORT_SERIAL_USB=y
CONFIG_MICROROS_PUBLISHERS="20"
CONFIG_MICROROS_SUBSCRIBERS="12"
CONFIG_MICROROS_CLIENTS="8"
CONFIG_MICROROS_SERVERS="8"
CONFIG_MICROROS_XRCE_DDS_MTU="2048"
CONFIG_UART_LINE_CTRL=y


# Serial/USB for Micro-ROS
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_CDC_ACM=y
CONFIG_USB_CDC_ACM_RINGBUF_SIZE=16384
CONFIG_USB_REQUEST_BUFFER_SIZE=16384
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_LOG_BACKEND_UART=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_UART_USE_RUNTIME_CONFIGURE=y
CONFIG_INPUT=y
CONFIG_INPUT_SBUS=y
# disable SBUS sync events; rely on raw event cadence instead
CONFIG_INPUT_SBUS_SEND_SYNC=n
# Helpful debug while bringing up SBUS
# Set Input subsystem logging to DEBUG level
# CONFIG_INPUT_EVENT_DUMP=y

# Scheduler and threads
CONFIG_NUM_PREEMPT_PRIORITIES=16
CONFIG_SYSTEM_WORKQUEUE_PRIORITY=2
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_MAIN_THREAD_PRIORITY=0
CONFIG_WDT_DISABLE_AT_BOOT=y

# C library and POSIX
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_NANO=n
CONFIG_PTHREAD_IPC=n
CONFIG_POSIX_API=y
CONFIG_POSIX_CLOCK=y

# System
CONFIG_SYS_CLOCK_TICKS_PER_SEC=1000
CONFIG_BUILD_OUTPUT_HEX=y

# Sensors
CONFIG_SENSOR=y
CONFIG_I2C=y
CONFIG_SPI=y
CONFIG_ISM330DLC=y
CONFIG_SENSOR=y
CONFIG_MCP9600=y
CONFIG_DAC=y
CONFIG_DAC_INIT_PRIORITY=80

# Encoders configuration (add specific encoder configs below as needed)
CONFIG_COUNTER=y
CONFIG_COUNTER_TIMER_STM32=y

# PWM control and capture - Zephyr 4.1 compliant
CONFIG_PWM=y
CONFIG_PWM_CAPTURE=y
CONFIG_PWM_STM32=y
CONFIG_PINCTRL=y

# Safety
CONFIG_WATCHDOG=y

# Debug and logging (disable consoles to avoid USART3 conflicts)
CONFIG_STDOUT_CONSOLE=y
CONFIG_PRINTK=y
CONFIG_UART_CONSOLE=y
CONFIG_FAULT_DUMP=2
CONFIG_THREAD_NAME=y
CONFIG_THREAD_MONITOR=y
CONFIG_LOG=n
CONFIG_LOG_DEFAULT_LEVEL=0
# Enable float formatting in logs/printf
CONFIG_CBPRINTF_FP_SUPPORT=y
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y
#- Level 0: Off
#- Level 1: Error
#- Level 2: Warning
#- Level 3: Info
#- Level 4: Debug

# Additional debugging
CONFIG_ASSERT=y
CONFIG_ASSERT_VERBOSE=y
CONFIG_COMPILER_WARNINGS_AS_ERRORS=n

CONFIG_STACK_SENTINEL=y
CONFIG_THREAD_ANALYZER=y
CONFIG_ASSERT=y

# CRC support needed by BMS interface (crc8_ccitt)
CONFIG_CRC=y
# Enable TDK HAL so the ICM42x7x driver can include its EMD headers
CONFIG_TDK_HAL=y

CONFIG_SENSOR=y
CONFIG_LOG=y
CONFIG_SENSOR_LOG_LEVEL_DBG=n

# Floating point format support
# Selecting this increases stack size requirements slightly, but increases code size significantly.
CONFIG_CBPRINTF_FP_SUPPORT=y

# Trigger mode: sample is using interrupt triggering
CONFIG_ICM42X70_TRIGGER_OWN_THREAD=y
CONFIG_SERIAL=y
CONFIG_CONSOLE=y
CONFIG_STDOUT_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_PRINTK=y          
CONFIG_LOG_BACKEND_UART=y  
